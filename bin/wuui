#!/usr/bin/env node

process.env.NODE_PATH = __dirname + '/../node_modules/'
const { resolve } = require('path')
const res = command => resolve(__dirname, '../commands/', command)
const Page = res('page')
const program = require('commander')

program
  .version(require('../package').version )

program
  .usage('<command>')

// Command: wuui init
program
  .command('init')
  .description('生产一个新的')
  .alias('i')
  .action(() => {
    require(res('init'))
  })

// Command: wuui lsit
program
  .command('list')
  .description('查询所有项目模版')
  .alias('l')
  .action(() => {
    require(res('list'))
  })

// Command: wuui page [pageName]
program
  .command('page [pageName]')
  .alias('pa')
  .description('创建新的页面')
  .option('--name [pageName]', '页面名称')
  .option('--description [pageDescription]', '页面描述')
  .option('--sass', '启用sass')
  .action(function(pageName, option) {
    let page = new Page({
      pageName: pageName || option.name,
      description: option.description,
      sass: option.sass
    })
    // 创建页面
    page.create(function () {

    })
  })


program.parse(process.argv)

if(!program.args.length){
  program.help()
}